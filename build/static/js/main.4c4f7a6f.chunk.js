(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,a){},153:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(19),l=a.n(s),c=(a(76),a(9)),o=a(10),i=a(12),m=a(11),u=a(13),p=(a(77),a(5)),d=a.n(p),h=a(7),g=(a(80),a(3)),f=a(68),E=(a(53),a(159)),v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).toggleCollapse=function(){a.setState({isOpen:!a.state.isOpen})},a.SetActive=function(){a.setState({home:!1,users:!1,live:!1,search:!1})},a.state={isOpen:!1,logOut:!1,home:a.props.home,users:a.props.users,live:a.props.live,search:a.props.search},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.state.logOut?(localStorage.clear(),r.a.createElement(E.a,{to:"/auth"})):r.a.createElement(g.s,{color:"green",light:!0,expand:"md"},r.a.createElement(g.t,{href:"/",className:""},r.a.createElement("img",{src:"https://senedico.com/wp-content/uploads/2017/09/appel-a-candidatures-pour-le-recrutement-de-la-seconde-cohorte-du-psej.png",alt:"psej",className:"img-responsive"})),r.a.createElement(g.v,{onClick:this.toggleCollapse}),r.a.createElement(g.d,{id:"navbarCollapse3",isOpen:this.state.isOpen,navbar:!0},r.a.createElement(g.u,{left:!0,className:"mx-auto"},r.a.createElement(g.q,{active:this.state.home},r.a.createElement(g.r,{to:"/"},"Presences")),r.a.createElement(g.q,{active:this.state.users},r.a.createElement(g.r,{to:"/users"},"Utilisateurs")),r.a.createElement(g.q,{active:this.state.live},r.a.createElement(g.r,{to:"/live",active:!0},"Surveillance")),r.a.createElement(g.q,{active:this.state.search},r.a.createElement(g.r,{to:"/search"},"Recherche"))),r.a.createElement(g.u,{right:!0},r.a.createElement(g.g,null,r.a.createElement(g.j,{className:"dopdown-toggle",nav:!0},r.a.createElement("img",{src:"https://cdn0.iconfinder.com/data/icons/avatars-6/500/Avatar_boy_man_people_account_client_male_person_user_work_sport_beard_team_glasses-512.png",className:"rounded-circle z-depth-0",style:{height:"50px",padding:0},alt:""})),r.a.createElement(g.i,{className:"dropdown-default",right:!0},r.a.createElement(g.h,{onClick:function(){console.log("account")}},"Compte"),r.a.createElement(g.h,{onClick:function(){e.setState({logOut:!0})}},"Deconnection"))))))}}]),t}(n.Component),b=a(32),y=function(){var e=Object(h.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.post("http://admin.psej.xyz/auth/test",{token:localStorage.getItem("usertoken")});case 2:if(e.sent.data.success){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),w=a(32),x=function(e){return e<10?"0"+e:e},j=[{label:"Date",field:"date",sort:"asc",width:200},{label:"Name",field:"name",sort:"asc",width:150},{label:"Time",field:"time",sort:"asc",width:300}],O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).onChange=function(){var e=Object(h.a)(d.a.mark(function e(t){var n,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({date:t}),n="".concat(x(t.getDate())).concat(x(t.getMonth()+1)).concat(t.getFullYear()),e.next=4,w.get("http://admin.psej.xyz/checkin/find/".concat(n));case 4:(r=e.sent).data.data&&a.setState({data:{columns:j,rows:r.data.data[0].attendents}});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.ChekLogin=Object(h.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),a.state={date:new Date,loggedIn:!1,data:{columns:j,rows:[]}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(d.a.mark(function e(){var t,a,n,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return t=e.sent,this.setState({loggedIn:t}),a=new Date,n="".concat(x(a.getDate())).concat(x(a.getMonth()+1)).concat(a.getFullYear()),e.next=8,w.get("http://admin.psej.xyz/checkin/find/".concat(n));case 8:(r=e.sent).data.data&&this.setState({data:{columns:j,rows:r.data.data[0].attendents}});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loggedIn?r.a.createElement(E.a,{to:"/auth"}):r.a.createElement("div",null,r.a.createElement(v,{home:!0}),r.a.createElement(g.e,null,r.a.createElement("div",{className:"md-8 mx-10"},r.a.createElement("div",{className:"horizontal"},r.a.createElement("div",{className:"Date"},r.a.createElement("label",{style:{marginLeft:10,fontWeight:"bold",marginRight:10}},"Liste de presence du"),r.a.createElement(f.a,{onChange:this.onChange,selected:this.state.date,todayButton:"Today",dateFormat:"yyyy/MM/dd"}),r.a.createElement(n.Fragment,null,r.a.createElement(g.a,{floating:!0,gradient:"blue",onClick:Object(h.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("http://admin.psej.xyz/open");case 2:case"end":return e.stop()}},e)}))},r.a.createElement(g.k,{icon:"lock"})," Ouvrir la porte"))),r.a.createElement("div",{className:"table"},r.a.createElement(g.f,{data:this.state.data,striped:!0,searching:!0}))))))}}]),t}(n.Component),k=(a(147),a(32)),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).Login=Object(h.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("trying to log in"),e.next=3,k.post("http://admin.psej.xyz/auth/login",{username:a.state.email,password:a.state.password},{headers:{"Content-Type":"application/json"}});case 3:t=e.sent,console.log(t.data),t.data.Authenticated&&(localStorage.setItem("usertoken",t.data.token),console.log(localStorage.getItem("usertoken")+"hello"),a.setState({goHome:!0}));case 6:case"end":return e.stop()}},e)})),a.Register=Object(h.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("http://admin.psej.xyz/auth/register",{username:a.state.email,password:a.state.password,fullname:a.state.name,phone:a.state.phone});case 2:t=e.sent,console.log(t.data.success),t.data.success||alert(t.data.message);case 5:case"end":return e.stop()}},e)})),a.state={email:"",password:"",register:!1,rppassword:"",name:"",phone:"",goHome:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.state.goHome?r.a.createElement(E.a,{to:"/"}):r.a.createElement("div",{className:"Container"},r.a.createElement(g.e,{className:"mx-auto"},r.a.createElement(g.b,{style:{width:"30rem"},className:"mx-auto"},r.a.createElement(g.w,null,r.a.createElement(g.c,{md:"10",className:"mx-auto"},r.a.createElement("form",null,r.a.createElement("img",{src:"https://senedico.com/wp-content/uploads/2017/09/appel-a-candidatures-pour-le-recrutement-de-la-seconde-cohorte-du-psej.png",alt:"psej",className:"mx-auto d-block"}),r.a.createElement("p",{className:""},this.state.register?"REGISTER":"LOGIN"),r.a.createElement("label",{className:"grey-text "},"Email"),r.a.createElement("input",{type:"email",id:"defaultFormLoginEmailEx",className:"form-control",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}}),r.a.createElement("br",null),r.a.createElement("label",{className:"grey-text"},"Password"),r.a.createElement("input",{type:"password",id:"defaultFormLoginPasswordEx",className:"form-control",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}}),r.a.createElement("br",null),this.state.register?r.a.createElement("div",null,r.a.createElement("label",{className:"grey-text"},"Repeat password"),r.a.createElement("input",{type:"password",id:"repeatpassword",className:"form-control",value:this.state.rppassword,onChange:function(t){return e.setState({rppassword:t.target.value})}}),r.a.createElement("br",null),r.a.createElement("label",{className:"grey-text"},"Full Name"),r.a.createElement("input",{type:"name",id:"name",className:"form-control",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),r.a.createElement("br",null),r.a.createElement("label",{className:"grey-text"},"Phone Number"),r.a.createElement("input",{type:"name",id:"phone",className:"form-control",value:this.state.phone,onChange:function(t){return e.setState({phone:t.target.value})}}),r.a.createElement("br",null),r.a.createElement("a",null,r.a.createElement("h1",{style:{fontSize:15,color:"blue",marginVertical:10},onClick:function(){e.setState({register:!e.state.register})}},"Click here to login"))):r.a.createElement("a",null,r.a.createElement("h1",{style:{fontSize:15,color:"blue",marginVertical:10},onClick:function(){e.setState({register:!e.state.register})}},"Click here to create an account")),r.a.createElement("div",{className:"text-center mt-3 mb-3"},r.a.createElement(g.a,{color:"indigo",onClick:this.state.register?this.Register:this.Login},this.state.register?"REGISTER":"LOGIN"))))))))}}]),t}(r.a.Component),C=a(69),S=a.n(C),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={loggedIn:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,this.setState({loggedIn:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loggedIn?r.a.createElement(E.a,{to:"/auth"}):r.a.createElement("div",null,r.a.createElement(v,{live:!0}),r.a.createElement(S.a,{url:"https://www.youtube.com/watch?v=ysz5S6PUM-U",playing:!0}))}}]),t}(n.Component),z=(a(153),a(32)),F=[{label:"Name",field:"name",sort:"asc",width:200},{label:"Phone",field:"phone",sort:"asc",width:150},{label:"Company",field:"company",sort:"asc",width:200},{label:"Email",field:"email",sort:"asc",width:300}],_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).toggle=function(){a.setState({modal:!a.state.modal})},a.Upload=function(e){a.setState({file_name:e.target.files[0].name,file:e.target.files[0]})},a.Submit=Object(h.a)(d.a.mark(function e(){var t,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("image",a.state.file,a.state.file.name),t.append("name",a.state.name),t.append("company",a.state.company),t.append("phone",a.state.phone),t.append("email",a.state.email),e.next=8,z.post("http://admin.psej.xyz/recog/enroll",t);case 8:(n=e.sent).data.success||(a.setState({modal:!1,failure:!0,message:n.data.message}),setTimeout(function(){a.setState({failure:!1,modal:!1,name:"",email:"",company:"",phone:"",file:{}})},2e3)),n.data.success&&(a.setState({modal:!1,alert:!0,message:"Successfully added"}),setTimeout(function(){a.setState({alert:!1,name:"",email:"",company:"",phone:"",message:"",file:{}})},2e3));case 11:case"end":return e.stop()}},e)})),a.state={startDate:new Date,modal:!1,file_name:"Choose a picture",name:"",phone:"",company:"",email:"",file:{},alert:!1,alertModal:"",message:"",failure:!1,data:{columns:[],rows:[]}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.get("http://admin.psej.xyz/users");case 2:t=e.sent,this.setState({data:{columns:F,rows:t.data.data}});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Main"},r.a.createElement(v,{users:!0}),r.a.createElement(g.e,null,r.a.createElement("div",{className:"md-8 mx-10"},r.a.createElement("div",{className:"horizontal"},r.a.createElement(n.Fragment,null,r.a.createElement(g.a,{floating:!0,gradient:"blue",style:{width:300},onClick:this.toggle},r.a.createElement(g.k,{icon:"user"})," Enregistrer Une Personne"))),r.a.createElement("div",{className:"table"},r.a.createElement(g.f,{data:this.state.data,striped:!0,searching:!0}))),r.a.createElement(g.m,{isOpen:this.state.modal,toggle:this.toggle},r.a.createElement(g.p,{toggle:this.toggle},"Fiche d'enregistrement"),r.a.createElement(g.n,null,r.a.createElement(g.l,{label:"Full Name",value:this.state.name,onChange:function(t){e.setState({name:t.target.value})}}),r.a.createElement(g.l,{label:"Company or Project Name",value:this.state.company,onChange:function(t){e.setState({company:t.target.value})}}),r.a.createElement(g.l,{label:"Phone Number",value:this.state.phone,onChange:function(t){e.setState({phone:t.target.value})}}),r.a.createElement(g.l,{label:"Email",value:this.state.email,onChange:function(t){e.setState({email:t.target.value})},validate:!0,type:"email"}),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroupFileAddon01"},"Upload")),r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{type:"file",className:"custom-file-input",id:"inputGroupFile01","aria-describedby":"inputGroupFileAddon01",onChange:this.Upload}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile01"},this.state.file_name)))),r.a.createElement(g.o,null,r.a.createElement(g.a,{color:"secondary",onClick:this.toggle},"Close"),r.a.createElement(g.a,{color:"primary",onClick:this.Submit},"Submit"))),r.a.createElement(g.m,{isOpen:this.state.alert,style:{borderRadius:20},toggle:this.toggle},r.a.createElement(g.n,{className:"mx-auto",style:{textAlign:"center"}},r.a.createElement(g.k,{icon:"check-circle",size:"5x",color:"green",style:{color:"green"}}),r.a.createElement("h1",{style:{textAlign:"center"}},this.state.message))),r.a.createElement(g.m,{isOpen:this.state.failure,style:{borderRadius:20},toggle:this.toggle},r.a.createElement(g.n,{className:"mx-auto",style:{textAlign:"center"}},r.a.createElement(g.k,{icon:"exclamation-triangle",size:"5x",style:{color:"orange"}}),r.a.createElement("h1",{style:{textAlign:"center"}},this.state.message.toUpperCase())))))}}]),t}(n.Component),D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={loggedIn:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,this.setState({loggedIn:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loggedIn?r.a.createElement(E.a,{to:"/auth"}):r.a.createElement("div",null,r.a.createElement(v,{search:!0}),r.a.createElement("h1",null,"Search"))}}]),t}(n.Component),M=a(160),R=a(161),A=a(70),L=function(){return r.a.createElement(M.a,null,r.a.createElement(R.a,null,r.a.createElement(A.a,{exact:!0,path:"/auth",component:N}),r.a.createElement(A.a,{exact:!0,path:"/",component:O}),r.a.createElement(A.a,{exact:!0,path:"/users",component:_}),r.a.createElement(A.a,{exact:!0,path:"/live",component:I}),r.a.createElement(A.a,{exact:!0,path:"/search",component:D})))},P=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(L,null))}}]),t}(n.Component);a(154),a(155),a(156),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(P,null),document.getElementById("root"))},71:function(e,t,a){e.exports=a(157)},76:function(e,t,a){},77:function(e,t,a){},80:function(e,t,a){}},[[71,1,2]]]);
//# sourceMappingURL=main.4c4f7a6f.chunk.js.map