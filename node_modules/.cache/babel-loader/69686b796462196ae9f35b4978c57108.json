{"ast":null,"code":"import _regeneratorRuntime from \"/home/djibril/Desktop/psej-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/djibril/Desktop/psej-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/djibril/Desktop/psej-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/djibril/Desktop/psej-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/djibril/Desktop/psej-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/djibril/Desktop/psej-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/djibril/Desktop/psej-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/djibril/Desktop/psej-web/src/Components/Home/Home.js\";\nimport React, { Component, Fragment } from 'react';\nimport \"./home.css\";\nimport { MDBContainer, MDBBtn } from 'mdbreact';\nimport { MDBDataTable, MDBIcon } from 'mdbreact';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport NavBarPage from \"./SideBar\";\nimport { Verify } from \"../Auth/Check\";\nimport { Redirect } from \"react-router-dom\"; // import DatePicker from \"react-date-picker\"\n\nvar axios = require(\"axios\");\n\nvar addZero = function addZero(number) {\n  if (number < 10) {\n    return '0' + number;\n  } else {\n    return number;\n  }\n};\n\nvar myColumns = [{\n  label: 'Date',\n  field: 'date',\n  sort: 'asc',\n  width: 200\n}, {\n  label: 'Name',\n  field: 'name',\n  sort: 'asc',\n  width: 150\n}, {\n  label: 'Time',\n  field: 'time',\n  sort: 'asc',\n  width: 300\n}];\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n\n    _this.onChange =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(date) {\n        var dtime, response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.setState({\n                  date: date\n                });\n\n                dtime = \"\".concat(addZero(date.getDate())).concat(addZero(date.getMonth() + 1)).concat(date.getFullYear());\n                _context.next = 4;\n                return axios.get(\"http://admin.psej.xyz/checkin/find/\".concat(dtime));\n\n              case 4:\n                response = _context.sent;\n\n                if (response.data.data) {\n                  _this.setState({\n                    data: {\n                      columns: myColumns,\n                      rows: response.data.data[0].attendents\n                    }\n                  });\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.ChekLogin =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    _this.state = {\n      date: new Date(),\n      loggedIn: false,\n      data: {\n        columns: myColumns,\n        rows: []\n      }\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var login, t, dtime, response;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return Verify();\n\n              case 2:\n                login = _context3.sent;\n                this.setState({\n                  loggedIn: login\n                });\n                t = new Date();\n                dtime = \"\".concat(addZero(t.getDate())).concat(addZero(t.getMonth() + 1)).concat(t.getFullYear());\n                _context3.next = 8;\n                return axios.get(\"http://admin.psej.xyz/checkin/find/\".concat(dtime));\n\n              case 8:\n                response = _context3.sent;\n\n                if (response.data.data) {\n                  this.setState({\n                    data: {\n                      columns: myColumns,\n                      rows: response.data.data[0].attendents\n                    }\n                  });\n                }\n\n              case 10:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.loggedIn) {\n        return React.createElement(Redirect, {\n          to: \"/auth\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(NavBarPage, {\n        home: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }), React.createElement(MDBContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"md-8 mx-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"horizontal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"Date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        style: {\n          marginLeft: 10,\n          fontWeight: \"bold\",\n          marginRight: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"Liste de presence du\"), React.createElement(DatePicker, {\n        onChange: this.onChange,\n        selected: this.state.date,\n        todayButton: \"Today\",\n        dateFormat: \"yyyy/MM/dd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(MDBBtn, {\n        floating: true,\n        gradient: \"blue\",\n        onClick:\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee4() {\n          return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  _context4.next = 2;\n                  return axios.get(\"http://admin.psej.xyz/open\");\n\n                case 2:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4);\n        })),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(MDBIcon, {\n        icon: \"lock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), \" Ouvrir la porte\"))), React.createElement(\"div\", {\n        className: \"table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(MDBDataTable, {\n        data: this.state.data,\n        striped: true,\n        searching: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["/home/djibril/Desktop/psej-web/src/Components/Home/Home.js"],"names":["React","Component","Fragment","MDBContainer","MDBBtn","MDBDataTable","MDBIcon","DatePicker","NavBarPage","Verify","Redirect","axios","require","addZero","number","myColumns","label","field","sort","width","Home","props","onChange","date","setState","dtime","getDate","getMonth","getFullYear","get","response","data","columns","rows","attendents","ChekLogin","state","Date","loggedIn","login","t","marginLeft","fontWeight","marginRight"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport \"./home.css\"\nimport { MDBContainer, MDBBtn} from 'mdbreact';\nimport {  MDBDataTable, MDBIcon} from 'mdbreact';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport NavBarPage from \"./SideBar\";\nimport {Verify} from \"../Auth/Check\"\nimport {Redirect} from \"react-router-dom\"\n// import DatePicker from \"react-date-picker\"\nconst axios = require(\"axios\")\n\nconst addZero = (number) => {\n  if(number <10) {\n      return '0'+ number;\n  }\n  else {\n      return number\n  }\n}\nvar myColumns = [\n     {   \n      label: 'Date',\n      field: 'date',\n      sort: 'asc',\n      width: 200\n    },\n    {\n      label: 'Name',\n      field: 'name',\n      sort: 'asc',\n      width: 150\n    },\n    {\n      label: 'Time',\n      field: 'time',\n      sort: 'asc',\n      width:300\n    }\n  ]\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      date: new Date(), \n      loggedIn: false,\n      data : {\n        columns:myColumns,\n        rows: []\n    }\n  }\n}\n \n  onChange = async (date) => {\n    this.setState({ date })\n    var dtime= `${addZero(date.getDate())}${addZero(date.getMonth()+1)}${date.getFullYear()}`\n    const response = await axios.get(`http://admin.psej.xyz/checkin/find/${dtime}`)\n    if(response.data.data){\n      this.setState({data: {columns: myColumns, rows: response.data.data[0].attendents}})\n    }\n\n  }\n  \n  async componentDidMount () {\n      var login = await Verify()\n      this.setState({loggedIn: login})\n      var t = new Date()\n      var dtime= `${addZero(t.getDate())}${addZero(t.getMonth()+1)}${t.getFullYear()}`\n      const response = await axios.get(`http://admin.psej.xyz/checkin/find/${dtime}`)\n      if(response.data.data){\n        this.setState({data: {columns: myColumns, rows: response.data.data[0].attendents}})\n   \n      }\n  }\n  ChekLogin = async () => {\n\n  }\n\n  render() {\n    if(this.state.loggedIn){\n      return(   <Redirect to=\"/auth\" />);\n    }\n    return (\n      <div>\n        <NavBarPage home={true}/>\n      <MDBContainer>\n      <div className=\"md-8 mx-10\">\n          <div className=\"horizontal\">\n              <div className=\"Date\">\n              <label style={{marginLeft: 10, fontWeight: \"bold\", marginRight: 10}}>\n                Liste de presence du \n              </label>\n              <DatePicker\n                onChange={this.onChange}\n                selected={this.state.date}\n                todayButton={\"Today\"}\n                dateFormat=\"yyyy/MM/dd\"\n              />\n               <Fragment>\n              <MDBBtn  floating gradient=\"blue\"   onClick= {async () => {await axios.get(\"http://admin.psej.xyz/open\")}}>\n                 <MDBIcon icon=\"lock\" ></MDBIcon> Ouvrir la porte\n              </MDBBtn>\n              </Fragment>\n              </div>\n              <div className=\"table\">\n              <MDBDataTable\n                data={this.state.data}\n                striped\n                searching={true}\n              />\n              </div>\n          </div>\n      </div>\n      </MDBContainer>\n   </div>\n\n    );\n  }\n}\n\n\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}